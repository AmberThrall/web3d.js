<html>
	<head>
		<title>web3d - Examples</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100%; }
		</style>

		<script type="text/javascript" src="../build/web3d.js"></script>
		<script type="text/javascript">
			var cube;
			var program;

			function init() {
				web3d.log("web3d.js Version: ", web3d.version());
				web3d.clearColor(new web3d.Color(0x000000ff))

				var vertexShader = new web3d.Shader(0, "	\
						attribute vec3 aVertexPosition;		\
						uniform mat4 uMVMatrix;				\
						uniform mat4 uPMatrix;				\
						void main(void) {					\
							gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);	\
						}"
					);
				var fragmentShader = new web3d.Shader(1, "		\
					 	precision mediump float;					\
						void main(void) {							\
							gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\
						}"
					);
				program = new web3d.Program(vertexShader, fragmentShader);
				program.bind();
				program.mapAttribute(web3d.ProgramLocations.POSITION0, "aVertexPosition");
				program.mapUniform(web3d.ProgramLocations.PERSPECTIVE_MATRIX, "uPMatrix");
				program.mapUniform(web3d.ProgramLocations.MODEL_VIEW_MATRIX, "uMVMatrix");

				cube = new web3d.Geometry();
				cube.vertices = [
					0.0, 1.0, 0.0,
					-1.0, -1.0, 0.0,
					1.0, -1.0, 0.0
				];
				cube.update(web3d.RenderTypes.TRIANGLE_STRIP);
			}

			function update() {
				var pMatrix = new web3d.Matrix4();
				var mvMatrix = new web3d.Matrix4();
				//pMatrix.makePerspective(45, document.getElementById("canvas").width / document.getElementById("canvas").height, 0.1, 1000);
				//mvMatrix.makeTranslation(new web3d.Vector3(-1.5, 0.0, -7.0));

				program.uniformMatrix4(program.locations[web3d.ProgramLocations.PERSPECTIVE_MATRIX], false, pMatrix);
				program.uniformMatrix4(program.locations[web3d.ProgramLocations.MODEL_VIEW_MATRIX], false, mvMatrix);

				cube.render(program);
			}
		</script>
	</head>
	<body>
		<canvas id="canvas"></canvas>

		<script type="text/javascript">
			web3d.initialize(document.getElementById("canvas"), init, update);
		</script>
	</body>
</html>